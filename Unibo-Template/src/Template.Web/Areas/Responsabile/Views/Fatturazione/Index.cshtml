@{
    ViewData["Title"] = "Fatturazione Clienti – Dashboard Responsabile";
    var identitaCorrente = (Template.Web.Areas.IdentitaViewModel)ViewData[Template.Web.Areas.IdentitaViewModel.VIEWDATA_IDENTITACORRENTE_KEY];

}

@section pageTitle {
<div class="onit-page-title d-flex justify-content-between align-items-center ml-5 mr-5 mt-3">
        <h1><i class="fa-solid fa-file-invoice-dollar"></i> Fatturazione</h1>
        
                @if (identitaCorrente != null)
                {
                    <div class="nav-item dropdown">
                        <a href="#" 
                           class="nav-link d-flex align-items-center" 
                           type="button" 
                           id="dropdownProfiloToolbar"
                           data-bs-toggle="dropdown" 
                           aria-expanded="false">
                            <img class="rounded-circle me-2" 
                                src="/Profilo/Immagine?v=@DateTime.Now.Ticks" 
                                id="currentProfileImage"
                                style="width: 35px; height: 35px; object-fit: cover;"
                                onerror="this.src='@identitaCorrente.GravatarUrl'" />
                            
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="dropdownProfiloToolbar" style="min-width: 280px;">
                            <li class="dropdown-header bg-light">
                                <div class="d-flex align-items-center py-2">
                                    <img src="/Profilo/Immagine?v=@DateTime.Now.Ticks" 
                                        class="rounded-circle me-3" 
                                        style="width: 50px; height: 50px; object-fit: cover;"
                                        onerror="this.src='@identitaCorrente.GravatarUrl'">
                                    <div>
                                        <div class="fw-bold text-dark">@identitaCorrente.NomeCompletoUtenteCorrente</div>
                                        <small class="text-muted">@identitaCorrente.EmailUtenteCorrente</small>
                                    </div>
                                </div>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            
                            <li>
                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#modalCambiaFoto">
                                    <i class="fa-solid fa-camera text-primary"></i> Cambia foto profilo
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#" onclick="rimuoviFotoProfilo(); return false;">
                                    <i class="fa-solid fa-trash text-danger"></i> Rimuovi foto
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            
                            <li>
                                <a class="dropdown-item text-danger" 
                                   href="javascript:void(0)" 
                                   onclick="javascript: document.getElementById('POST_LogOut_Dashboard').submit()" 
                                   title="Chiudi sessione di lavoro">
                                    <i class="fa-solid fa-right-from-bracket"></i> Esci
                                </a>
                            </li>
                        </ul>
                        <form autocomplete="off" method="post" action="@Url.Action(MVC.Login.Logout())" id="POST_LogOut_Dashboard" style="display:none;"></form>
                    </div>
                }
}
</div>

<div class="container-fluid onit-page-content">

    <div class="row">

        <!-- SIDEBAR RESPONSABILE -->
        <div class="col-2 onit-sidebar">
            <ul class="onit-sidebar-menu">
                <li>
                    <a asp-area="Responsabile"
                       asp-controller="Dashboard"
                       asp-action="Index">
                        <i class="fa-solid fa-calendar-check"></i> Attività
                    </a>
                </li>
                <li>
                    <a asp-area="Responsabile"
                       asp-controller="Progetti"
                       asp-action="Index">
                        <i class="fa-solid fa-diagram-project"></i> Progetti
                    </a>
                </li>
                <li>
                    <a asp-area="Responsabile"
                       asp-controller="Rendicontazione"
                       asp-action="Index">
                        <i class="fa-solid fa-clipboard-list"></i> Rendicontazione
                    </a>
                </li>
                <li>
                    <a asp-area="Responsabile"
                       asp-controller="Congedo"
                       asp-action="Index">
                        <i class="fa-solid fa-plane-departure"></i> Congedo
                    </a>
                </li>
                <li>
                    <a asp-area="Responsabile"
                       asp-controller="Contratto"
                       asp-action="Index">
                        <i class="fa-solid fa-file-contract"></i> Contratto
                    </a>
                </li>
                <li>
                    <a class="active"
                       asp-area="Responsabile"
                       asp-controller="Fatturazione"
                       asp-action="Index">
                        <i class="fa-solid fa-receipt"></i> Fatturazione
                    </a>
                </li>
            </ul>
        </div>

        <!-- MAIN CONTENT -->
        <div class="col-10">

            <!-- Toolbar -->
            <div class="onit-toolbar d-flex justify-content-between align-items-center mb-3">
                <h3 class="fw-bold mb-0">Fatturazione Clienti</h3>
            </div>

            <!-- Tabs -->
            <ul class="nav nav-tabs mb-4" id="fatturazioneTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="progetti-tab" data-bs-toggle="tab" data-bs-target="#progetti" 
                            type="button" role="tab">
                        <i class="fa-solid fa-diagram-project me-2"></i>Progetti da Fatturare
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="fatture-tab" data-bs-toggle="tab" data-bs-target="#fatture" 
                            type="button" role="tab" onclick="loadFatture()">
                        <i class="fa-solid fa-file-invoice me-2"></i>Fatture Emesse
                    </button>
                </li>
            </ul>

            <div class="tab-content" id="fatturazioneTabContent">
                <!-- TAB PROGETTI -->
                <div class="tab-pane fade show active" id="progetti" role="tabpanel">
                    <div id="progetti-container" class="row">
                        <div class="col-12 text-center py-5">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Caricamento...</span>
                            </div>
                            <p class="mt-2 text-muted">Caricamento progetti...</p>
                        </div>
                    </div>
                </div>

                <!-- TAB FATTURE EMESSE -->
                <div class="tab-pane fade" id="fatture" role="tabpanel">
                    <div class="onit-card p-3">
                        <div class="table-responsive">
                            <table class="table table-hover" id="fatture-table">
                                <thead>
                                    <tr>
                                        <th>N° Fattura</th>
                                        <th>Data</th>
                                        <th>Cliente</th>
                                        <th>Progetto</th>
                                        <th>Ore</th>
                                        <th>Importo</th>
                                        <th>Stato</th>
                                        <th>Azioni</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td colspan="8" class="text-center text-muted py-4">
                                            Seleziona il tab per caricare le fatture
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- MODALE FATTURAZIONE -->
<div class="modal fade" id="modalFatturazione" tabindex="-1">
    <div class="modal-dialog modal-xl">
        <div class="modal-content onit-card">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fa-solid fa-file-invoice me-2"></i>
                    Genera Fattura
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <!-- COLONNA SINISTRA: Input -->
                    <div class="col-md-5">
                        <h6 class="fw-bold mb-3">Dati Progetto</h6>
                        
                        <div class="mb-3">
                            <label class="form-label">Progetto</label>
                            <input type="text" class="form-control" id="modal-progetto" readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Cliente</label>
                            <input type="text" class="form-control" id="modal-cliente" readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Periodo</label>
                            <input type="text" class="form-control" id="modal-periodo" readonly>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Ore Totali Rendicontate</label>
                            <input type="text" class="form-control fw-bold" id="modal-ore-totali" readonly>
                        </div>

                        <hr>

                        <h6 class="fw-bold mb-3">Parametri Fatturazione</h6>

                        <div class="mb-3">
                            <label class="form-label fw-bold">
                                Costo Orario (€/ora) <span class="text-danger">*</span>
                            </label>
                            <input type="number" class="form-control form-control-lg" id="input-costo-orario" 
                                   step="0.01" min="0" placeholder="es. 75.00" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">IVA %</label>
                            <select class="form-select" id="input-iva">
                                <option value="0">Esente</option>
                                <option value="4">4%</option>
                                <option value="10">10%</option>
                                <option value="22" selected>22%</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Note (opzionali)</label>
                            <textarea class="form-control" id="input-note" rows="3" 
                                      placeholder="Note aggiuntive per la fattura..."></textarea>
                        </div>

                        <button type="button" class="btn btn-primary btn-lg w-100 mb-2" onclick="generaPreview()">
                            <i class="fa-solid fa-eye me-2"></i>Genera Preview
                        </button>
                    </div>

                    <!-- COLONNA DESTRA: Preview Fattura -->
                    <div class="col-md-7">
                        <div id="preview-container" class="d-none">
                            <h6 class="fw-bold mb-3">Preview Fattura</h6>
                            
                            <!-- FATTURA PREVIEW -->
                            <div class="border rounded p-4 bg-light" style="min-height: 500px;">
                                <div class="text-center mb-4">
                                    <h4 class="fw-bold">FATTURA</h4>
                                    <p class="mb-0">N° <span id="preview-numero" class="fw-bold"></span></p>
                                    <p class="text-muted small">Data: <span id="preview-data"></span></p>
                                </div>

                                <div class="row mb-4">
                                    <div class="col-6">
                                        <p class="mb-1 text-muted small">FORNITORE</p>
                                        <p class="fw-bold mb-0">La Tua Azienda S.r.l.</p>
                                        <p class="small mb-0">Via Example 123</p>
                                        <p class="small mb-0">40100 Bologna (BO)</p>
                                        <p class="small">P.IVA: IT12345678901</p>
                                    </div>
                                    <div class="col-6">
                                        <p class="mb-1 text-muted small">CLIENTE</p>
                                        <p class="fw-bold mb-0" id="preview-cliente-nome"></p>
                                    </div>
                                </div>

                                <hr>

                                <div class="mb-4">
                                    <p class="mb-1"><strong>Progetto:</strong> <span id="preview-progetto"></span></p>
                                    <p class="mb-1"><strong>Periodo:</strong> <span id="preview-periodo-preview"></span></p>
                                </div>

                                <table class="table table-sm table-bordered">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Descrizione</th>
                                            <th class="text-end">Ore</th>
                                            <th class="text-end">€/h</th>
                                            <th class="text-end">Totale</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Attività di sviluppo software</td>
                                            <td class="text-end" id="preview-ore"></td>
                                            <td class="text-end" id="preview-costo-orario"></td>
                                            <td class="text-end fw-bold" id="preview-imponibile"></td>
                                        </tr>
                                    </tbody>
                                </table>

                                <div class="mt-4">
                                    <div class="row">
                                        <div class="col-6 offset-6">
                                            <table class="table table-sm">
                                                <tr>
                                                    <td>Imponibile:</td>
                                                    <td class="text-end fw-bold" id="preview-totale-imponibile"></td>
                                                </tr>
                                                <tr>
                                                    <td>IVA (<span id="preview-perc-iva"></span>%):</td>
                                                    <td class="text-end" id="preview-importo-iva"></td>
                                                </tr>
                                                <tr class="table-primary">
                                                    <td class="fw-bold">TOTALE:</td>
                                                    <td class="text-end fw-bold fs-5" id="preview-totale-finale"></td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-3" id="preview-note-container" style="display:none;">
                                    <p class="text-muted small mb-1"><strong>Note:</strong></p>
                                    <p class="small" id="preview-note"></p>
                                </div>
                            </div>

                            <!-- PULSANTE INVIA -->
                            <div class="mt-4 text-center">
                                <button type="button" class="btn btn-success btn-lg px-5" onclick="inviaFattura()">
                                    <i class="fa-solid fa-paper-plane me-2"></i>Invia al Cliente
                                </button>
                            </div>
                        </div>

                        <!-- MESSAGGIO INIZIALE -->
                        <div id="preview-placeholder" class="text-center text-muted py-5">
                            <i class="fa-solid fa-file-invoice fa-4x mb-3 opacity-25"></i>
                            <p>Inserisci il costo orario e clicca su "Genera Preview" per visualizzare l'anteprima della fattura</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts {
<script>
    let progettoSelezionato = null;
    let previewData = null;

    // Carica progetti al caricamento pagina
    $(document).ready(function() {
        loadProgetti();
    });

    // Carica lista progetti
    async function loadProgetti() {
        try {
            const response = await fetch('/Responsabile/Fatturazione/GetProgetti');
            const progetti = await response.json();
            renderProgetti(progetti);
        } catch (error) {
            console.error('Errore:', error);
            $('#progetti-container').html('<div class="col-12"><div class="alert alert-danger">Errore nel caricamento dei progetti</div></div>');
        }
    }

    function renderProgetti(progetti) {
        const container = $('#progetti-container');
        container.empty();

        if (progetti.length === 0) {
            container.append(`
                <div class="col-12">
                    <div class="onit-card p-5 text-center">
                        <i class="fa-solid fa-folder-open fa-3x text-muted mb-3"></i>
                        <h4>Nessun progetto disponibile</h4>
                        <p class="text-muted">Non ci sono progetti con ore rendicontate da fatturare</p>
                    </div>
                </div>
            `);
            return;
        }

        progetti.forEach(progetto => {
            const card = `
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="onit-card p-3 h-100">
                        <div class="d-flex justify-content-between align-items-start mb-3">
                            <h5 class="mb-0 fw-bold">
                                <i class="fa-solid fa-briefcase text-primary me-2"></i>
                                ${progetto.nome}
                            </h5>
                            <span class="badge bg-info">Attivo</span>
                        </div>

                        <p class="text-muted mb-2">
                            <i class="fa-solid fa-building me-2"></i>
                            <strong>Cliente:</strong> ${progetto.cliente}
                        </p>

                        <p class="text-muted mb-2 small">
                            <i class="fa-solid fa-calendar me-2"></i>
                            <strong>Periodo:</strong> ${formatDate(progetto.dataInizio)} - ${progetto.dataScadenza ? formatDate(progetto.dataScadenza) : 'N/D'}
                        </p>

                        <hr>

                        <div class="row text-center mb-3">
                            <div class="col-6">
                                <div class="border-end">
                                    <h3 class="mb-0 text-primary fw-bold">${progetto.oreTotali.toFixed(1)}</h3>
                                    <small class="text-muted">Ore</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <h3 class="mb-0 text-success fw-bold">${progetto.numeroFatture}</h3>
                                <small class="text-muted">Fatture</small>
                            </div>
                        </div>

                        ${progetto.oreTotali > 0 ? `
                            <div class="d-grid gap-2">
                                <button type="button" class="btn btn-secondary" onclick="apriFatturazione(${progetto.id})">
                                    <i class="fa-solid fa-file-invoice-dollar me-2"></i>
                                    Genera Fattura
                                </button>
                                
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="visualizzaDettaglio(${progetto.id})">
                                    <i class="fa-solid fa-info-circle me-2"></i>
                                    Dettaglio
                                </button>
                            </div>
                        ` : `
                            <div class="alert alert-warning mb-0 small">
                                <i class="fa-solid fa-exclamation-triangle me-1"></i>
                                Nessuna ora rendicontata
                            </div>
                        `}

                        ${progetto.ultimaFattura ? `
                            <div class="mt-3">
                                <div class="alert alert-success mb-0 py-2 small">
                                    <i class="fa-solid fa-check-circle me-1"></i>
                                    <strong>Ultima:</strong> ${progetto.ultimaFattura.numeroFattura} - ${formatDate(progetto.ultimaFattura.dataEmissione)}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            container.append(card);
        });
    }

    // Apri modale fatturazione
    async function apriFatturazione(progettoId) {
        progettoSelezionato = progettoId;
        
        // Reset form
        $('#input-costo-orario').val('');
        $('#input-iva').val('22');
        $('#input-note').val('');
        $('#preview-container').addClass('d-none');
        $('#preview-placeholder').removeClass('d-none');
        previewData = null;

        try {
            const response = await fetch(`/Responsabile/Fatturazione/GetDettaglioProgetto?progettoId=${progettoId}`);
            const data = await response.json();

            $('#modal-progetto').val(data.nomeProgetto);
            $('#modal-cliente').val(data.cliente);
            $('#modal-periodo').val(`${formatDate(data.periodoDa)} - ${formatDate(data.periodoA)}`);
            $('#modal-ore-totali').val(`${data.oreTotali.toFixed(2)} ore`);

            new bootstrap.Modal(document.getElementById('modalFatturazione')).show();
        } catch (error) {
            console.error('Errore:', error);
            alert('Errore nel caricamento dei dati del progetto');
        }
    }

    // Genera preview
    async function generaPreview() {
        const costoOrario = parseFloat($('#input-costo-orario').val());
        const percentualeIva = parseFloat($('#input-iva').val());
        const note = $('#input-note').val().trim();

        if (!costoOrario || costoOrario <= 0) {
            alert('Inserisci un costo orario valido');
            $('#input-costo-orario').focus();
            return;
        }

        try {
            const response = await fetch('/Responsabile/Fatturazione/GeneraPreview', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    progettoId: progettoSelezionato,
                    costoOrario: costoOrario,
                    percentualeIva: percentualeIva,
                    note: note
                })
            });

            const data = await response.json();
            previewData = data;
            renderPreview(data);
        } catch (error) {
            console.error('Errore:', error);
            alert('Errore nella generazione della preview');
        }
    }

    // Render preview
    function renderPreview(data) {
        $('#preview-numero').text(data.numeroFattura);
        $('#preview-data').text(formatDate(data.dataEmissione));
        $('#preview-cliente-nome').text(data.cliente);
        $('#preview-progetto').text(data.nomeProgetto);
        $('#preview-periodo-preview').text(`${formatDate(data.periodoDa)} - ${formatDate(data.periodoA)}`);
        $('#preview-ore').text(data.oreTotali.toFixed(2));
        $('#preview-costo-orario').text(`€ ${data.costoOrario.toFixed(2)}`);
        $('#preview-imponibile').text(`€ ${data.importoImponibile.toFixed(2)}`);
        $('#preview-totale-imponibile').text(`€ ${data.importoImponibile.toFixed(2)}`);
        $('#preview-perc-iva').text(data.percentualeIva.toFixed(0));
        $('#preview-importo-iva').text(`€ ${data.importoIva.toFixed(2)}`);
        $('#preview-totale-finale').text(`€ ${data.importoTotale.toFixed(2)}`);

        if (data.note) {
            $('#preview-note').text(data.note);
            $('#preview-note-container').show();
        } else {
            $('#preview-note-container').hide();
        }

        $('#preview-placeholder').addClass('d-none');
        $('#preview-container').removeClass('d-none');
    }

    // Invia fattura
    async function inviaFattura() {
        if (!previewData) {
            alert('Genera prima la preview');
            return;
        }

        if (!confirm(`Confermi l'invio della fattura ${previewData.numeroFattura} al cliente ${previewData.cliente}?`)) {
            return;
        }

        try {
            const response = await fetch('/Responsabile/Fatturazione/InviaFattura', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    progettoId: progettoSelezionato,
                    costoOrario: parseFloat($('#input-costo-orario').val()),
                    percentualeIva: parseFloat($('#input-iva').val()),
                    note: $('#input-note').val().trim()
                })
            });

            const data = await response.json();
            
            if (data.success) {
                alert(`✅ ${data.message}`);
                bootstrap.Modal.getInstance(document.getElementById('modalFatturazione')).hide();
                loadProgetti();
            } else {
                alert('Errore nell\'invio');
            }
        } catch (error) {
            console.error('Errore:', error);
            alert('Errore nell\'invio della fattura');
        }
    }

    // Carica fatture
    async function loadFatture() {
        try {
            const response = await fetch('/Responsabile/Fatturazione/GetFatture');
            const fatture = await response.json();
            renderFatture(fatture);
        } catch (error) {
            console.error('Errore:', error);
        }
    }

    function renderFatture(fatture) {
        const tbody = $('#fatture-table tbody');
        tbody.empty();

        if (fatture.length === 0) {
            tbody.append('<tr><td colspan="8" class="text-center text-muted py-4">Nessuna fattura emessa</td></tr>');
            return;
        }

        fatture.forEach(f => {
            const statoClass = {
                'Pagata': 'success',
                'Inviata': 'primary',
                'Bozza': 'secondary'
            }[f.stato] || 'secondary';

            const row = `
                <tr>
                    <td><strong>${f.numeroFattura}</strong></td>
                    <td>${formatDate(f.dataEmissione)}</td>
                    <td>${f.cliente}</td>
                    <td>${f.nomeProgetto}</td>
                    <td>${f.oreTotali.toFixed(1)}h</td>
                    <td class="fw-bold text-success">€ ${f.importoTotaleConIva.toFixed(2)}</td>
                    <td><span class="badge bg-${statoClass}">${f.stato}</span></td>
                    <td>
                        <button class="btn btn-sm btn-outline-primary" title="Visualizza">
                            <i class="fa-solid fa-eye"></i>
                        </button>
                    </td>
                </tr>
            `;
            tbody.append(row);
        });
    }

    // Utility
    function formatDate(dateString) {
        if (!dateString) return 'N/D';
        const date = new Date(dateString);
        return date.toLocaleDateString('it-IT', { day: '2-digit', month: '2-digit', year: 'numeric' });
    }

    async function visualizzaDettaglio(progettoId) {
        try {
            const response = await fetch(`/Responsabile/Fatturazione/GetDettaglioProgetto?progettoId=${progettoId}`);
            const data = await response.json();
            
            let html = `
                <div class="modal fade" id="modalDettaglio" tabindex="-1">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content onit-card">
                            <div class="modal-header">
                                <h5 class="modal-title">Dettaglio - ${data.nomeProgetto}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <p><strong>Cliente:</strong> ${data.cliente}</p>
                                <p><strong>Ore Totali:</strong> ${data.oreTotali.toFixed(2)} ore</p>
                                <hr>
                                <h6>Per Dipendente:</h6>
                                <table class="table table-sm">
                                    <thead><tr><th>Dipendente</th><th class="text-end">Ore</th><th class="text-end">Attività</th></tr></thead>
                                    <tbody>
            `;

            data.dettaglioDipendenti.forEach(d => {
                html += `<tr><td>${d.nomeDipendente}</td><td class="text-end">${d.oreTotali.toFixed(1)}h</td><td class="text-end">${d.numeroAttivita}</td></tr>`;
            });

            html += `</tbody></table></div></div></div></div>`;
            
            $('#modalDettaglio').remove();
            $('body').append(html);
            new bootstrap.Modal(document.getElementById('modalDettaglio')).show();
            $('#modalDettaglio').on('hidden.bs.modal', function () { $(this).remove(); });
        } catch (error) {
            console.error('Errore:', error);
            alert('Errore nel caricamento');
        }
    }
</script>
}

@section styles {
<style>
    .nav-tabs .nav-link {
        color: #6c757d;
        font-weight: 500;
    }
    .nav-tabs .nav-link.active {
        color: #0d6efd;
        font-weight: 600;
    }
    .border-end {
        border-right: 1px solid #dee2e6 !important;
    }
</style>
}
