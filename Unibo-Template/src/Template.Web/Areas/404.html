<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>404 ‚Äì Level not found</title>

<style>
body {
  margin: 0;
  background: #5c94fc;
  font-family: monospace;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

#wrapper {
  color: white;
  text-align: center;
}

#game {
  position: relative;
  width: 640px;
  height: 240px;
  background: linear-gradient(#5c94fc 65%, #7cfc00 65%);
  overflow: hidden;
  border: 4px solid #000;
}

.ground {
  position: absolute;
  bottom: 0;
  height: 40px;
  width: 100%;
  background: #8b4513;
  border-top: 4px solid #000;
}

#player {
  position: absolute;
  bottom: 40px;
  left: 60px;
  width: 24px;
  height: 32px;
  background:
    linear-gradient(red 0 0),
    linear-gradient(#000 0 0);
  background-size: 100% 100%;
  border: 3px solid #000;
}

.pipe {
  position: absolute;
  bottom: 40px;
  width: 40px;
  height: 60px;
  background: green;
  border: 4px solid #000;
  right: -50px;
}

.coin {
  position: absolute;
  bottom: 120px;
  width: 18px;
  height: 18px;
  background: gold;
  border-radius: 50%;
  border: 3px solid #000;
  right: -50px;
}

.door {
  position: absolute;
  bottom: 40px;
  width: 36px;
  height: 56px;
  background: brown;
  border: 4px solid #000;
  right: -50px;
}

.jump {
  animation: jump 0.55s ease-out;
}

@keyframes jump {
  0% { bottom: 40px; }
  50% { bottom: 120px; }
  100% { bottom: 40px; }
}
</style>
</head>

<body>

<div id="wrapper">
  <h2>404 ‚Äî Level not found üçÑ</h2>
  <p>Salta finch√© non trovi l‚Äôuscita</p>

  <div id="game">
    <div id="player"></div>
    <div class="pipe"></div>
    <div class="coin"></div>
    <div class="door"></div>
    <div class="ground"></div>
  </div>

  <p>Punteggio: <span id="score">0</span></p>
</div>

<script>
const player = document.getElementById("player");
const pipe = document.querySelector(".pipe");
const coin = document.querySelector(".coin");
const door = document.querySelector(".door");
const scoreEl = document.getElementById("score");

let jumping = false;
let score = 0;
let speed = 2;

function jump() {
  if (jumping) return;
  jumping = true;
  player.classList.add("jump");
  setTimeout(() => {
    player.classList.remove("jump");
    jumping = false;
  }, 550);
}

document.addEventListener("keydown", e => {
  if (e.code === "Space" || e.code === "ArrowUp") jump();
});

document.addEventListener("touchstart", jump);

function move(el) {
  let x = -50;
  return setInterval(() => {
    x += speed;
    el.style.right = x + "px";
    if (x > 700) x = -50;
  }, 20);
}

move(pipe);
move(coin);
move(door);

setInterval(() => {
  const p = player.getBoundingClientRect();
  const pipeBox = pipe.getBoundingClientRect();
  const coinBox = coin.getBoundingClientRect();
  const doorBox = door.getBoundingClientRect();

  // tubo = game over
  if (
    p.right > pipeBox.left &&
    p.left < pipeBox.right &&
    p.bottom > pipeBox.top
  ) {
    alert("üíÄ Game Over");
    location.reload();
  }

  // moneta
  if (
    p.right > coinBox.left &&
    p.left < coinBox.right &&
    p.top < coinBox.bottom &&
    p.bottom > coinBox.top
  ) {
    score++;
    speed += 0.3;
    scoreEl.textContent = score;
    coin.style.right = "-50px";
  }

  // porta = home
  if (
    p.right > doorBox.left &&
    p.left < doorBox.right
  ) {
    window.location.href = "/";
  }
}, 30);
</script>

</body>
</html>
